PRGSEG  SEGMENT CODE
RSEG    PRGSEG

PUBLIC LICZ

LICZ:
MOV R1,#0
LOOP:
MOV DPTR,#8008H
MOVX A,@DPTR
JB ACC.0,LICZ_DO_PRZODU

; LICZ_DO_TYLU:
MOV A,R1
MOV DPTR,#8009H
MOVX @DPTR,A
JZ KONIEC_LICZENIA
DEC A
MOV R1,A
SJMP KONIEC_LICZENIA

LICZ_DO_PRZODU:
MOV A,R1
MOV DPTR,#8009H
MOVX @DPTR,A
INC A
MOV R1,A

KONIEC_LICZENIA:
MOV DPTR,#-65025
WAIT_LOOP:
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
INC DPTR
MOV A,DPH
ORL A,DPL
JNZ WAIT_LOOP
SJMP LOOP
    
RET
END
