C51 COMPILER V9.60.0.0   MAIN                                                              04/22/2021 20:47:18 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <reg52.h>
   2          #include <intrins.h>
   3          #include "lcd.h"
   4          #include "mkd51sim.h"
   5          
   6          unsigned char xdata PTSEG _at_ 0x8018;
   7          unsigned char wyswietlacz[4];
   8          unsigned char presc = 0, seg = 0;
   9          unsigned char Tab7s[] = {0x3f, 0x06, 0x5b, 0x4f, 0x66, 0x6d, 0x7d, 0x07, 0x7f, 0x6f, 0x77, 0x7c, 0x39, 0x5
             -f, 0x79, 0x71};
  10          
  11          unsigned int licznik = 9960; //16 bitow
  12          
  13          void main(void)
  14          {
  15   1      
  16   1        P1 = 0x3c;
  17   1        TMOD = 1;
  18   1        IE = 0x82;        //odblokoweanie przerwan
  19   1        TH0 = (-2500) >> 8;   // czestotliwosc przerwan- 2,5ms
  20   1        TL0 = (-2500) & 0xff; //
  21   1        TCON = 0x10;
  22   1      
  23   1        while (1)
  24   1        {
  25   2          if (licznik == 10000)
  26   2          {
  27   3            licznik = 0;
  28   3          }
  29   2          wyswietlacz[0] = licznik % 10;
  30   2          wyswietlacz[1] = licznik / 10 % 10;
  31   2          wyswietlacz[2] = licznik / 100 % 10;
  32   2          wyswietlacz[3] = licznik / 1000 % 10; 
  33   2        }
  34   1      }
  35          
  36          void a() interrupt 1
  37          {
  38   1        TH0 = (-2500) >> 8;
  39   1        TL0 = (-2500) & 0xff;
  40   1      
  41   1        if (++presc == 100) //szybkosc modulo 10000
  42   1        {
  43   2          presc = 0;
  44   2          licznik++;
  45   2        }
  46   1        seg = ++seg & 3;
  47   1        P1 = (P1 & 0xfc) | seg | 0x3c;
  48   1        PTSEG = Tab7s[wyswietlacz[seg]];
  49   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    188    ----
   CONSTANT SIZE    =   ----    ----
C51 COMPILER V9.60.0.0   MAIN                                                              04/22/2021 20:47:18 PAGE 2   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     24    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
